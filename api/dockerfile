FROM python:3.9

# Adding the app directory where the server will run, then cd to its parent folder
RUN mkdir -p /usr/src/api/server
WORKDIR /usr/src/api

# Copy requirements.txt then install those dependencies
COPY requirements.txt ./server
RUN pip install -r ./server/requirements.txt

# Copy the app then enter that directory
COPY . ./server
WORKDIR /usr/src/api/server

# Start Gunicorn
ENTRYPOINT ["sh", "/usr/src/api/server/start_gunicorn.sh"]