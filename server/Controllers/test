import base64
import os, json
from cryptography.fernet import Fernet

key = Fernet.generate_key()
f = Fernet(key)
msg = "secret message"
token = f.encrypt(msg.encode())

with open('test.json','w+') as test:
    test.write(json.dumps({"key":key.decode(),"pw": token.decode()}))



with open('test.json','r') as test:
    js = json.loads(test.read())

f = Fernet(js['key'])

pw = f.decrypt(js['pw'].encode())

print(pw.decode() == msg)